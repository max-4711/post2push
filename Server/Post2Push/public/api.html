<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>post2push - API reference</title>
</head>
<body>
    <h1 id="api-endpoints">API endpoints</h1>
    <h2 id="get-">GET /</h2>
    <p><strong>Description:</strong> Can be used as indicator for availability of the post2push service.</p>
    <h2 id="post-channels-">POST /channels/</h2>
    <p><strong>Description:</strong> Creates a new push channel.</p>
    <p><strong>Accepted content type:</strong> application/json</p>
    <p><strong>Parameters:</strong></p>
    <ul>
        <li>Name: Desired name of the new push channel. Will also be used to uniquely identify the channel on the server. Maximum length is 100 characters. If a channel with same name already exists, channel creation will fail.</li>
        <li>ChannelCreationSecret: Secret configured in app.config.js in order to prove to be authorized to create new channels.</li>
        <li>SubscriptionSecret (optional): Desired secret, which will be needed to subscribe to the channel. If not provided, created channel can be subscribed without any authentication. Maximum length is 40 characters.</li>
        <li>IconUrl (optional): URL of any image, which will be shown in push channels postet to the channel. If not provided, no icon will be shown. Maximum length is 100 characters.</li>
    </ul>
    <p><strong>Returns:</strong></p>
    <ul>
        <li>Error (if applicable): One sentence explaining what has gone wrong.</li>
        <li>Message (if applicable): Confirmation for channel creation, if no error has occurred.</li>
        <li>PushSecret (if applicable): Secret, which will be needed in order to push messages to the channel.</li>
    </ul>
    <h2 id="post-channels-name-push">POST /channels/:name/push</h2>
    <p><strong>Description:</strong> Sends a message into a push channel.</p>
    <p><strong>Accepted content type:</strong> application/json</p>
    <p><strong>Parameters:</strong></p>
    <ul>
        <li>name (in route): Name of the target push channel.</li>
        <li>MessageContent: Content of the push notification.</li>
        <li>MessageTitle: Title of the push notification.</li>
        <li>PushSecret: Secret in order to prove to be authorized to push to this channel.</li>
    </ul>
    <p><strong>Returns:</strong></p>
    <ul>
        <li>Error (if applicable): One sentence explaining what has gone wrong.</li>
        <li>Message (if applicable): Confirmation for notifications have been sent.</li>
    </ul>
    <h2 id="delete-channels-name">DELETE /channels/:name</h2>
    <p><strong>Description:</strong> Deletes a push channel.</p>
    <p><strong>Parameters:</strong></p>
    <ul>
        <li>name (in route): Name of the target push channel</li>
        <li>ChannelCreationSecret: Secret configured in app.config.js in order to prove to be authorized to delete channels.</li>
    </ul>
    <p><strong>Returns:</strong></p>
    <ul>
        <li>Error (if applicable): One sentence explaining what has gone wrong.</li>
        <li>Message (if applicable): Confirmation channel has been deleted.</li>
    </ul>
    <h2 id="post-subscriptions-">POST /subscriptions/</h2>
    <p><strong>Description:</strong> Creates a new subscription for a push channel.</p>
    <p><strong>Accepted content type:</strong> application/json</p>
    <p><strong>Parameters:</strong></p>
    <ul>
        <li>ChannelName: Name of the target push channel</li>
        <li>
            DeliveryDetails: Object containing information about VAPID push notification delivery<ul>
                <li>endpoint</li>
                <li>
                    keys<ul>
                        <li>auth</li>
                        <li>p256dh</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>ChannelSubscriptionSecret (if applicable): Secret as authentication for subscribing to the push channel. Can be nonexistent or up to 40 characters, just as configured upon channel creation.</li>
        <li>Name (optional): View name for this subscription. Won&#39;t be programmatically evaluated. Maximum supported length is 100 characters.</li>
    </ul>
    <p><strong>Returns:</strong></p>
    <ul>
        <li>Error (if applicable): One sentence explaining what has gone wrong.</li>
        <li>Message (if applicable): Confirmation subscription has been created.</li>
        <li>SubscriptionToken (if applicable): Token, which can be used to delete this subscription.</li>
    </ul>
    <p><strong>Remarks:</strong></p>
    <ul>
        <li>If the endpoint already subscribed the channel, no new subscription will be created, as this would result in duplicate notifications.</li>
        <li>As confirmation and for testing purposes, a push notification will be sent to the configured endpoint.</li>
    </ul>
    <h2 id="delete-subscriptions-token">DELETE /subscriptions/:token</h2>
    <p><strong>Description:</strong> Deletes a subscription.</p>
    <p><strong>Parameters:</strong> </p>
    <ul>
        <li>token (in route): Token identifying the subscription</li>
    </ul>
    <p><strong>Returns:</strong></p>
    <ul>
        <li>Error (if applicable): One sentence explaining what has gone wrong.</li>
        <li>Message (if applicable): Confirmation subscription has been deleted.</li>
    </ul>

</body>
</html>